<!DOCTYPE html>
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
	<head>
		<meta charset="utf-8" />
		<title>WAI-ARIA &amp; Custom Controls | Scripted Interactivity | EPUB 3 Accessibility Guidelines</title>
		<!--[if lt IE 9]> 			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> 		<![endif]-->
		<link type="text/css" rel="stylesheet" href="../../css/epub3.css" />
		<link href="../../css/classic-code.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="../../js/prettify.js"></script>
		<script type="text/javascript" src="../../js/jquery172min.js"></script>
		<script type="text/javascript"> 	// <![CDATA[
            $(document).ready(function () {
                prettyPrint();
            });//]]> </script>
		<style type="text/css">
			div#sc015-ex01-controls{
			    margin-left: 5em;
			    padding: 0.2em;
			    width: 7em;
			    text-align: center;
			    border: 1px solid rgb(0, 0, 0);
			    background-color: rgb(243, 243, 243)
			}
			div#sc015-ex01-controls img{
			    display: inline;
			}</style>
	</head>

	<body>
		<header>
			<div class="left">
				<img src="http://www.idpf.org/sites/idpf.org/files/epub-logo-2.gif" alt="EPUB Logo" class="logo" />
			</div>
			<h1><a href="http://www.idpf.org/accessibility/guidelines/">EPUB 3 Accessibility Guidelines</a></h1>
			<nav class="breadcrumb">
				<p>Main / Scripted Interactivity / WAI-ARIA &amp; Custom Controls</p>
			</nav>
			<nav class="mini-toc">
				<h3>In this section:</h3>
				<ol>
					<li><a href="#sc015-ex">Examples</a></li>
					<li><a href="#sc015-samp">Samples</a></li>
					<li><a href="#sc015-reqs">Compliance References</a></li>
					<li><a href="#sc015-res">Resources</a></li>
				</ol>
			</nav>
		</header>
		<section id="sc015" class="section">
			<h2>WAI-ARIA &amp; Custom Controls</h2>

			<section id="sc015-desc" class="usage">
				<p>Similar to the way that the <code><a href="../semantics/epub-type.html">epub:type</a></code> attribute adds
					semantics to elements, the WAI-ARIA <code>role</code> attribute can be used to inform assistive
					technologies about the function a custom control serves (e.g., to indicate that an image functions like a
					button). The list of supported roles for custom controls follows:</p>

				<ul class="multicol">
					<li><a href="http://www.w3.org/TR/wai-aria/roles#alert">alert</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#alertdialog">alertdialog</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#button">button</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#checkbox">checkbox</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#combobox">combobox</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#dialog">dialog</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#grid">grid</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#gridcell">gridcell</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#link">link</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#listbox">listbox</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#log">log</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#marquee">marquee</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#menu">menu</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#menubar">menubar</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#menuitem">menuitem</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#menuitemcheckbox">menuitemcheckbox</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#menuitemradio">menuitemradio</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#option">option</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#progressbar">progressbar</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#radio">radio</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#radiogroup">radiogroup</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#scrollbar">scrollbar</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#slider">slider</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#spinbutton">spinbutton</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#status">status</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#tab">tab</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#tablist">tablist</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#tabpanel">tabpanel</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#textbox">textbox</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#timer">timer</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#tooltip">tooltip</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#tree">tree</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#treegrid">treegrid</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/roles#treeitem">treeitem</a></li>
				</ul>
				<br />

				<p>Defining the type of a control using the <code>role</code> attribute is only the first step. The state of
					the control, and any properties associated with it, must also be maintained to ensure the reader can
					correctly interact with the control:</p>

				<ul>
					<li>States tell you something about the nature of the control: whether it is currently checked or not,
						whether it is hidden, etc. These must be maintained as the reader interacts with the control,
						otherwise they may get locked out of functionality (e.g., unable to reduce the volume, unable to make
						important content visible, etc.).</li>
					<li>Properties are typically set once and identify meta information such as the label or description for
						a control (or element).</li>
				</ul>

				<p>ARIA defines the following states and properties:</p>

				<ul class="multicol">
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-activedescendant"
							>aria-activedescendant</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-atomic">aria-atomic</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-autocomplete"
						>aria-autocomplete</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-busy" class="state-reference"
							>aria-busy (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-checked" class="state-reference"
							>aria-checked (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls">aria-controls</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-describedby"
						>aria-describedby</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-disabled" class="state-reference"
							>aria-disabled (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-dropeffect"
						>aria-dropeffect</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-expanded" class="state-reference"
							>aria-expanded (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-flowto">aria-flowto</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-grabbed" class="state-reference"
							>aria-grabbed (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-haspopup">aria-haspopup</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden" class="state-reference"
							>aria-hidden (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-invalid" class="state-reference"
							>aria-invalid (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-label">aria-label</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-labelledby"
						>aria-labelledby</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-level">aria-level</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-live">aria-live</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-multiline">aria-multiline</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-multiselectable"
							>aria-multiselectable</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-orientation"
						>aria-orientation</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-owns">aria-owns</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-posinset">aria-posinset</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-pressed" class="state-reference"
							>aria-pressed (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-readonly">aria-readonly</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-relevant">aria-relevant</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-required">aria-required</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-selected" class="state-reference"
							>aria-selected (state)</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-setsize">aria-setsize</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-sort">aria-sort</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuemax">aria-valuemax</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuemin">aria-valuemin</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuenow">aria-valuenow</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuetext">aria-valuetext</a></li>
				</ul>
				<br />
			</section>

			<section id="sc015-ex" class="example">
				<h3>Example</h3>
				<figure id="sc015-ex01">
					<figcaption>Example 1 &#8212; Indicating an image represents a button using a role</figcaption>
					<pre class="prettyprint linenums"><code>&lt;img src="controls/start.png"
     id="audio-start"
     role="button"
     tabindex="0"
     alt="Start"/></code></pre>
				</figure>

				<figure id="sc015-ex02">
					<figcaption>Example 2 &#8212; Maintaining state using JavaScript</figcaption>
					<p>The following simple example shows some of the considerations that have to be paid attention to when
						creating a custom control: setting and unsetting callback functions, enabling and disabling the
						control, changing the visual appearance of the buttons. To make this image work with keyboards, the
						reader's keypresses must also be monitored and actions turned on and off.</p>
					<pre class="prettyprint linenums small"><code>&lt;img src="controls/play.png"
     id="audio-start"
     alt="Start"
     role="button"
     aria-disabled="false"
     tabindex="0"
     onclick="controlPlayback('start')"/>

&lt;img src="controls/stop.png"
     id="audio-stop"
     alt="Stop"
     role="button"
     aria-disabled="true"
     tabindex="0"/>

&lt;script type="text/javascript">
&lt;![CDATA[
function controlPlayback(action) {

  var isStart = (action == 'start') ? true : false;
  
  var start_image = isStart ? 
              'controls/play-disabled.png' : 
              'controls/play.png';
  
  var stop_image = isStart ? 
              'controls/stop.png' : 
              'controls/stop-disabled.png';
  
  var start = document.getElementById('audio-start');
     start.setAttribute('aria-disabled', 
                  !start.getAttribute('aria-disabled'));
     start.setAttribute('disabled', 
                  !start.getAttribute('disabled'));
     start.onclick = isStart ? 
                null : 
                function () { controlPlayback('start'); };
     start.setAttribute('src', start_image);
  
  var stop = document.getElementById('audio-stop');
     stop.setAttribute('aria-disabled', 
                  !stop.getAttribute('aria-disabled'));
     stop.setAttribute('disabled', 
                  !stop.getAttribute('disabled'));
     stop.onclick = isStart ? 
                function () { controlPlayback('stop'); } : 
                null;
     stop.setAttribute('src', stop_image);
   
   if (isStart) {
     start.removeAttribute('onkeypress');
     stop.setAttribute('onkeypress', "if (event.keyCode==32||event.keyCode==13) { controlPlayback('stop'); }");
   }
   
   else {
     stop.removeAttribute('onkeypress');
     start.setAttribute('onkeypress', "if (event.keyCode==32||event.keyCode==13) { controlPlayback('start'); }");
   }
  
  alert(isStart ? 'Playback started!' : 'Playback stopped!');
}
]]&gt;
&lt;/script></code></pre>
					<p>The following buttons show this code in action:</p>
					<div id="sc015-ex01-controls">
						<img src="../../graphics/play.png" width="32" height="32" id="audio-start" alt="Start" role="button"
							aria-disabled="false" tabindex="0" onclick="controlPlayback('start')"
							onkeypress="if (event.keyCode==32||event.keyCode==13) { controlPlayback('start'); }" />

						<img src="../../graphics/stop-disabled.png" width="32" height="32" id="audio-stop" alt="Stop"
							role="button" aria-disabled="true" tabindex="0" />
					</div>
					<script type="text/javascript">
						//<![CDATA[
                        function controlPlayback(action) {
                            
                            var isStart = (action == 'start') ? true: false;
                            
                            var start_image = isStart ? '../../graphics/play-disabled.png': '../../graphics/play.png';
                            var stop_image = isStart ? '../../graphics/stop.png': '../../graphics/stop-disabled.png';
                            
                            var start = document.getElementById('audio-start');
                            start.setAttribute('aria-disabled', ! start.getAttribute('aria-disabled'));
                            start.setAttribute('disabled', ! start.getAttribute('disabled'));
                            start.onclick = isStart ? null: function () {
                                controlPlayback('start');
                            };
                            start.setAttribute('src', start_image);
                            
                            var stop = document.getElementById('audio-stop');
                            stop.setAttribute('aria-disabled', ! stop.getAttribute('aria-disabled'));
                            stop.setAttribute('disabled', ! stop.getAttribute('disabled'));
                            stop.onclick = isStart ? function () {
                                controlPlayback('stop');
                            }: null;
                            stop.setAttribute('src', stop_image);
                            
                            /* enable/disable keypresses */
                            if (isStart) {
                                start.removeAttribute('onkeypress');
                                stop.setAttribute('onkeypress', "if (event.keyCode==32||event.keyCode==13) { controlPlayback('stop'); }");
                            } else {
                                stop.removeAttribute('onkeypress');
                                start.setAttribute('onkeypress', "if (event.keyCode==32||event.keyCode==13) { controlPlayback('start'); }");
                            }
                            
                            alert(isStart ? 'Playback started!': 'Playback stopped!');
                        }//]]>
					</script>
				</figure>
			</section>

			<section id="sc015-samp" class="sample">
				<h3>Samples</h3>
				<ul>
					<li><a href="http://test.cita.uiuc.edu/aria/">Illinois Center for Information Technology and Web
							Accessibility &#8212; ARIA Examples</a></li>
				</ul>
			</section>

			<section id="sc015-reqs" class="reqs">
				<h3>Compliance References and Standards</h3>

				<ul>
					<li>WAI-ARIA &#8212; <a href="http://www.w3.org/TR/wai-aria/roles">The Roles Model</a></li>
					<li>WAI-ARIA &#8212; <a href="http://www.w3.org/TR/wai-aria/states_and_properties">Supported States and
							Properties</a></li>
				</ul>
			</section>

			<section id="sc015-res" class="res">
				<h3>Additional Resources</h3>
				<ul>
					<li><a href="http://www.w3.org/WAI/intro/aria">WAI-ARIA Overview</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria-primer/">WAI-ARIA 1.0 Primer</a></li>
					<li><a href="http://www.w3.org/TR/wai-aria-practices/#accessiblewidget">WAI-ARIA Authoring Practices
							&#8212; General Steps for Building an Accessible Widget with WAI-ARIA</a></li>
				</ul>
			</section>
		</section>
		<footer>
			<p>Please ask questions and report any typos, errors and omissions in the <a href="http://idpf.org/forums">IDPF
					forums</a>.</p>
			<p>For a list of changes to this site, refer to the <a
					href="https://github.com/IDPF/a11y-guidelines/commits/master">commit log</a>.</p>
			<p><a href="http://idpf.org/legal/terms-of-use">Terms of Use</a></p>
		</footer>
	</body>
</html>
